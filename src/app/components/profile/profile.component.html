<div class="profile-container">
  <div class="profile-header">
    <div class="profile-avatar-container">
      <img [src]="userProfile.photoURL || 'assets/user-baseImg.png'" alt="Profile Picture" class="profile-avatar">
      <label for="file-upload" class="custom-file-upload">
        <i class="fas fa-camera"></i>
      </label>
      <input id="file-upload" type="file" (change)="onFileSelected($event)">
    </div>
    <h1>{{ userProfile.username }}</h1>
  </div>

  <div class="profile-content">
    <div class="profile-section personal-info">
      <h2>Personal Information</h2>
      <p><strong>Name:</strong> {{ userProfile.firstName }} {{ userProfile.lastName }}</p>
      <p><strong>Email:</strong> {{ user?.email }}</p>
      <p><strong>Country:</strong> {{ userProfile.country || 'Not specified' }}</p>
      <p><strong>Date of Birth:</strong> {{ userProfile.dateOfBirth || 'Not specified' }}</p>
    </div>

    <div class="profile-section password-change">
      <h2>Change Password</h2>
      <form (ngSubmit)="updatePassword()" class="password-form">
        <div class="form-group">
          <label for="newPassword">New Password</label>
          <input type="password" id="newPassword" [(ngModel)]="newPassword" name="newPassword" required>
        </div>
        <div class="form-group">
          <label for="confirmPassword">Confirm New Password</label>
          <input type="password" id="confirmPassword" [(ngModel)]="confirmPassword" name="confirmPassword" required>
        </div>
        <button type="submit" class="btn btn-primary">Update Password</button>
      </form>
    </div>

    <div class="profile-section favorite-beers">
      <h2>Favorite Beers</h2>
      <div class="favorite-beers-list">
        <div *ngFor="let beer of favoriteBeers" class="favorite-beer-item">
          <img [src]="beer.beerImageUrl || 'assets/default-beer.png'" alt="{{ beer.name }}">
          <span>{{ beer.name }}</span>
          <button class="remove-favorite" (click)="removeFavoriteBeer(beer.id)">Remove</button>
        </div>
      </div>
    </div>

    <div class="profile-section new-beer-request">
      <h2>Request New Beer</h2>
      <button (click)="openNewBeerModal()" class="btn btn-secondary">Request New Beer</button>
    </div>

    <button (click)="signOut()" class="btn btn-danger logout-btn">Logout</button>
  </div>
</div>

<div *ngIf="showNewBeerModal" class="modal">
  <div class="modal-content">
    <span (click)="closeNewBeerModal()" class="close">&times;</span>
    <h2>Request New Beer</h2>
    <form (ngSubmit)="submitNewBeerRequest()" class="beer-request-form">
      <div class="form-group">
        <label for="beerName">Beer Name</label>
        <input type="text" id="beerName" [(ngModel)]="newBeer.name" name="beerName" required>
      </div>
      <div class="form-group">
        <label for="beerDescription">Description</label>
        <textarea id="beerDescription" [(ngModel)]="newBeer.description" name="beerDescription" required></textarea>
      </div>
      <button type="submit" class="btn btn-primary">Submit Request</button>
    </form>
  </div>
</div>